names(mn0)
unique(pm0$State.Code)
mrg<-merge(do,d1, by="state")
mrg<-merge(d0, d1, by="state")
head(mrg)
par(mfrow=c(1,1), mar=c(4,4,2,1))
with(mrg,plot(rep(1999,52), mrg[,2], xlim=c(1998,2013)))
with(mrg,points(rep(2012,52), mrg[,3]))
with(mrg,plot(rep(1999,52), mrg[,2], xlim=c(1998,2013)))
rep(1,4)
with(mrg,points(rep(2012,52), mrg[,3]))
segment(rep(1999,52), mrg[,2],rep(2012,52),mrg[,3])
segments(rep(1999,52), mrg[,2],rep(2012,52),mrg[,3])
savehistory(file = "Case Study.Rhistory")
dir()
swirl()
library(swirl)
swirl()
dim(pm0)
head(pm0)
cnames
cnames<-strplit(cnames,"|",fixed=TRUE)
cnames<-strsplit(cnames,"|",fixed=TRUE)
cnames
names(pm0)<-make.names(cnames[[1]][wcol])
head(pm0)
x0<-pm0$Sample.Value
str(x0)
mean(is.na(x0))
names(pm1)<-make.names(cnames[[1]][wcol])
dim(pm1)
x1<-pm1$Sample.Value
mean(is.na(x1))
summary(x0)
summary(x1)
boxplot(x0,x1)
boxplot(log10(x0),log10(x1))
negative <- x1<0
sum(negative,na.rm=TRUE)
mean(negative,na.rm=TRUE)
dates<-pm1$Date
str(dates)
dates<-as.Date(as.character(dates), "%Y%m%d")
head(dates)
hist(dates[negatives],"month")
hist(dates[negative],"month")
str(site0)
both<-intersect(site0,site1)
both
head(pm0)
cnt0<-subset(pm0, State.Code==36 & county.site %in% both)
cnt1<-subset(pm1, State.Code==36 & county.site %in% both)
sapply(split(cnt0,cnt0$county.site), nrow)
sapply(split(cnt1,cnt1$county.site), nrow)
pm0sub<-subset(cnt0,County.Code==63 & Site.ID==2008)
pm1sub<-subset(cnt1,County.Code==63 & Site.ID==2008)
x0sub<-pm0sub$Sample.Value
x1sub<-pm1sub$Sample.Value
dates0<-as.Date(as.character(pm0sub$Date),"%Y5m%d")
dates0<-as.Date(as.character(pm0sub$Date),"%Y%m%d")
dates1<-as.Date(as.character(pm1sub$Date),"%Y%m%d")
par(mfrow=c(1,2), mar=c(4,4,2,1))
plot(dates0,x0sub,pch=20)
abline(h=median(x0sub,na.rm=TRUE),lwd=2)
plot(dates1,x1sub,pch=20)
abline(h=median(x1sub,na.rm=TRUE),lwd=2)
rng<-range(x0sub,x1sub,na.rm=TRUE)
rng
mn0<-with(pm0,tapply(Sample.Value, State.Code,mean, na.rm=TRUE))
str(mn0)
mn1<-with(pm1,tapply(Sample.Value, State.Code,mean, na.rm=TRUE))
str(mn1)
summary(mn1)
summary(mn0)
summary(mn1)
d0<-data.frame(names(mn0),mn0)
d0<-data.frame(state=names(mn0),mean=mn0)
d1<-data.frame(state=names(mn1),mean=mn1)
mrg<-merge(d0,d1,by="state")
mrg<-merge(d0,d1,by=state)
dim(mrg)
head(mrg)
with(mrg,plot(rep(1,52),mrg[,2],xlim=c(.5,2.5)))
with(mrg,points(rep(2,52),mrg[,3]))
segments(rep(1,52),mrg[,2],rep(2,52),mrg[,3])
mrg[mrg$mean.x < mrg$mean.y,]
savehistory(file="SwirlCaseStudy.R")
rm(list=ls())
setwd('~/Documents/Github Repos/DataScienceSpecialisation/4. Exploratory Data Analysis/week 4')
## This first line will likely take a few seconds. Be patient!
NEI <- readRDS("summarySCC_PM25.rds")
SCC <- readRDS("Source_Classification_Code.rds")
head(SCC)
names(SCC)
table(SCC$Data.Category)
table(SCC$Short.Name)
names(SCC)
table(SCC$EI.Sector)
table(SCC$Option.Group)
table(SCC$Option.Set)
table(SCC$SCC.Level.One)
table(SCC$SCC.Level.Two)
table(SCC$SCC.Level.Three)
table(SCC$SCC.Level.Four)
names(SCC)
table(SCC$Map.To)
names(SCC)
table(SCC$Last.Inventory.Year)
head(NEI)
table(NEI$fips)
table(SCC$Last.Inventory.Year)
head(NEI)
table(NEI$year)
NEI_by_year<-with(NEI,tapply(Emissions, Year, sum, na.rm=T))
NEI_by_year<-with(NEI,tapply(Emissions, year, sum, na.rm=T))
dim(NEI_by_year)
NEI_by_year
sum(NEI$Emission[NEI$year==1999,])
sum(subset(NEI, year==1999)$Emission)
EpY <- with(NEI,tapply(Emissions, year, sum, na.rm=T))
names(EpY)
hist(EpY)
plot(EpY)
plot(nbames(EpY),EpY)
plot(names(EpY),EpY)
plot(names(EpY),EpY,pch=19)
plot(names(EpY),EpY,pch=19,col=3)
plot(names(EpY),EpY,pch=19,col=1)
plot(names(EpY),EpY,pch=19,col=2)
plot(names(EpY),EpY,pch=19,col=2,cex=3)
plot(names(EpY),EpY,pch=19,col=2,cex=2)
plot(names(EpY),EpY,pch=19,col=2,cex=2,xlab="Year")
plot(names(EpY),EpY,pch=19,col=2,cex=2,xlab="Year",ylab="Total Emission (ton/y)")
plot(names(EpY),EpY,pch=19,col=2,cex=2,xlab="Year",ylab="Total PM2.5 Emission (tons/y)")
plot(names(EpY),EpY,pch=19,col=2,cex=2,xlab="Year",ylab="Total PM2.5 Emission (ton/y)")
plot(names(EpY),EpY,pch=19,col=2,cex=2,xlab="Year",ylab="Total PM2.5 Emission (tons/y)")
plot(names(EpY),EpY,pch=19,col=2,cex=2,xlab="Year",ylab="Total PM2.5 Emission (tons/y)",title="d")
plot(names(EpY),EpY,pch=19,col=2,cex=2,xlab="Year",ylab="Total PM2.5 Emission (tons/y)",main="d")
plot(names(EpY),EpY,pch=19,col=2,cex=2,xlab="Year",ylab="Total PM2.5 Emission (tons/y)",main="d")
plot(names(EpY),EpY,pch=19,col=2,cex=2,xlab="Year",ylab="Total PM2.5 Emission (tons/y)",main="Total PM2.5 emission in US descrease 1999-2008")
plot(names(EpY),EpY,pch=19,col=2,cex=2,xlab="Year",ylab="Total PM2.5 Emission (tons/y)",main="Total PM2.5 emission in US descrease 1999-2008",xlim=c(1998,2010))
lines(names(EpY),EpY)
lines(names(EpY),EpY,col=2)
lines(names(EpY),EpY,col=2,cex=2)
lines(names(EpY),EpY,col=2,lwt=2)
lines(names(EpY),EpY,col=2,lwd=2)
lines(names(EpY),EpY,col=2,lw=2)
lines(names(EpY),EpY,col=2,lwd=2)
lines(names(EpY),EpY,col=2,lwd=3)
plot(names(EpY),EpY,pch=19,col=2,cex=2,xlab="Year",ylab="Total PM2.5 Emission (tons/y)",main="Total PM2.5 emission in US descrease 1999-2008",xlim=c(1998,2009))
plot(names(EpY),EpY,pch=19,col=2,cex=2,xlab="Year",ylab="Total PM2.5 Emission (tons/y)",main="Total PM2.5 emission in US descrease 1999-2008",xlim=c(1999,2009))
plot(names(EpY),EpY,pch=19,col=2,cex=2,xlab="Year",ylab="Total PM2.5 Emission (tons/y)",main="Total PM2.5 emission in US descrease 1999-2008",xlim=c(1998,2009))
lines(names(EpY),EpY,col=2,lwd=3)
png(filename="plot1a.png")
plot(names(EpY),EpY,
pch=19,
col=2,
cex=2,
xlab="Year",ylab="Total PM2.5 Emission (tons/y)",
main="Total PM2.5 emission in US descrease 1999-2008",
xlim=c(1998,2009))
lines(names(EpY),EpY,
col=2,
lwd=3)
# Close the graphical device
dev.off()
plot(names(EpY),EpY,
pch=19,
col=2,
cex=2,
xlab="Year",ylab="Total PM2.5 Emission (megatons/y)",
main="Total PM2.5 emission in US descrease 1999-2008",
xlim=c(1998,2009),
ylim=c(0,8))
lines(names(EpY),EpY,
col=2,
lwd=3)
plot(names(EpY),EpY,
pch=19,
col=2,
cex=2,
xlab="Year",ylab="Total PM2.5 Emission (megatons/y)",
main="Total PM2.5 emission in US descrease 1999-2008",
xlim=c(1998,2009)
)
lines(names(EpY),EpY,
col=2,
lwd=3)
EpY <- with(NEI,tapply(Emissions, year, sum, na.rm=T))/1e6
plot(names(EpY),EpY,
pch=19,
col=2,
cex=2,
xlab="Year",ylab="Total PM2.5 Emission (megatons/y)",
main="Total PM2.5 emission in US descrease 1999-2008",
xlim=c(1998,2009)
)
lines(names(EpY),EpY,
col=2,
lwd=3)
plot(names(EpY),EpY,
pch=19,
col=2,
cex=2,
xlab="Year",ylab="Total PM2.5 Emission (megatons/y)",
main="Total PM2.5 emission in US descrease 1999-2008",
xlim=c(1998,2009)
ylim=c(0,8))
lines(names(EpY),EpY,
col=2,
lwd=3)
plot(names(EpY),EpY,
pch=19,
col=2,
cex=2,
xlab="Year",ylab="Total PM2.5 Emission (megatons/y)",
main="Total PM2.5 emission in US descrease 1999-2008",
xlim=c(1998,2009),
ylim=c(0,8))
lines(names(EpY),EpY,
col=2,
lwd=3)
png(filename="plot1a.png")
plot(names(EpY),EpY,
pch=19,
col=2,
cex=2,
xlab="Year",ylab="Total PM2.5 Emission (megatons/y)",
main="Total PM2.5 emission in US descrease 1999-2008",
xlim=c(1998,2009),
ylim=c(0,8))
lines(names(EpY),EpY,
col=2,
lwd=3)
# Close the graphical device
dev.off()
NEI <- readRDS("summarySCC_PM25.rds")
SCC <- readRDS("Source_Classification_Code.rds")
# Calculate total emissions per year (megatons per year)
EpY <- with(NEI,tapply(Emissions, year, sum, na.rm=T))/1e6
# Plot chart to png file
png(filename="plot1.png")
plot(names(EpY),EpY,
pch=19,
col=2,
cex=2,
xlab="Year",ylab="Total PM2.5 Emission (megatons/y)",
main="Total PM2.5 emission in US descrease 1999-2008",
xlim=c(1998,2009),
ylim=c(0,8))
lines(names(EpY),EpY,
col=2,
lwd=3)
# Close the graphical device
dev.off()
png(filename="plot1.png")
plot(names(EpY),EpY,
pch=19,
col=2,
cex=2,
xlab="Year",ylab="Total PM2.5 Emission (megatons/y)",
main="Decrease in total PM2.5 Emission in USA 1999-2008",
xlim=c(1998,2009),
ylim=c(0,8))
lines(names(EpY),EpY,
col=2,
lwd=3)
# Close the graphical device
dev.off()
png(filename="plot1.png")
plot(names(EpY),EpY,
pch=19,
col=2,
cex=2,
xlab="Year",ylab="Total PM2.5 Emission (megatons/y)",
main="Decrease in Total PM2.5 Emission in USA 1999-2008",
xlim=c(1998,2009),
ylim=c(0,8))
lines(names(EpY),EpY,
col=2,
lwd=3)
# Close the graphical device
dev.off()
NEI_Baltimore <- subset(NEI, fips=="24510")
head(NEI)
head(NEI_Baltimore)
EpY
NEI_Baltimore <- subset(NEI,fips=="24510",year=="2008")
sum(NEI_Baltimore$Emissions)
head(NEI_Baltimore)
NEI_Baltimore <- subset(NEI,fips=="24510" & year=="2008")
sum(NEI_Baltimore$Emissions)
sum(NEI_Baltimore$Emissions,na.rm=TRUE)
NEI <- readRDS("summarySCC_PM25.rds")
NEI_Baltimore <- subset(NEI,fips=="24510" & year=="2008")
EpY <- with(NEI_Baltimore, tapply(Emissions, year, sum, na.rm=T))/1e6
EpY
NEI_Baltimore <- subset(NEI,fips=="24510")
# Calculate total emissions per year (megatons per year)
EpY <- with(NEI_Baltimore, tapply(Emissions, year, sum, na.rm=T))/1e6
EpY
# Reading the data into NEI and SCC
NEI <- readRDS("summarySCC_PM25.rds")
NEI_Baltimore <- subset(NEI,fips=="24510")
# Calculate total emissions per year (megatons per year)
EpY <- with(NEI_Baltimore, tapply(Emissions, year, sum, na.rm=T))/1e6
EpY
png(filename="plot2.png")
plot(names(EpY),EpY,
pch=19,
col=2,
cex=2,
xlab="Year",ylab="Total PM2.5 Emission (megatons/y)",
main="Total PM2.5 emission in US descrease 1999-2008",
xlim=c(1998,2009),
ylim=c(0,8))
lines(names(EpY),EpY,
col=2,
lwd=3)
# Close the graphical device
dev.off()
png(filename="plot2.png")
plot(names(EpY),EpY,
pch=19,
col=2,
cex=2,
xlab="Year",ylab="Total PM2.5 Emission (megatons/y)",
main="Total PM2.5 emission in US descrease 1999-2008",
xlim=c(1998,2009),
ylim=c(0,0.01))
lines(names(EpY),EpY,
col=2,
lwd=3)
# Close the graphical device
dev.off()
png(filename="plot2.png")
plot(names(EpY),EpY,
pch=19,
col=2,
cex=2,
xlab="Year",ylab="Total PM2.5 Emission (megatons/y)",
main="Total PM2.5 emission in US descrease 1999-2008",
xlim=c(1998,2009),
ylim=c(0,0.005))
lines(names(EpY),EpY,
col=2,
lwd=3)
# Close the graphical device
dev.off()
head(NEI_Baltimore)
NEI <- readRDS("summarySCC_PM25.rds")
NEI_Baltimore <- subset(NEI,fips=="24510")
# Calculate total emissions per year (megatons per year)
EpY <- with(NEI_Baltimore, tapply(Emissions, year, sum, na.rm=T))/1e6
g <- ggplot(EpY, aes(year, Emissions))
g + geom_point()
library(ggplot2)
g <- ggplot(EpY, aes(year, Emissions))
g + geom_point()
class(EpY)
class(NEI)
class(NEI_Baltimore)
g <- ggplot(NEI_Baltimore, aes(year, Emissions))
g + geom_point()
?subset
g <- ggplot(NEI_Baltimore, aes(year, Emissions))
g + geom_point()
head(NEI_Baltimore)
g <- ggplot(NEI_Baltimore, aes(year, Emissions))
g + geom_point(alpha=1/3) + facet_wrap(. ~ type, nrow = 1, ncol = 4)
g + geom_point(alpha=1/3) + facet_wrap(~ type, nrow = 1, ncol = 4)
g <- ggplot(NEI_Baltimore, aes(year, log10(Emissions))
g + geom_point(alpha=1/3) + facet_wrap(~ type, nrow = 1, ncol = 4)
g <- ggplot(NEI_Baltimore, aes(year, log10(Emissions))
g <- ggplot(NEI_Baltimore, aes(year, log10(Emissions)))
g + geom_point(alpha=1/3) + facet_wrap(~ type, nrow = 1, ncol = 4)
g <- ggplot(NEI_Baltimore, aes(year, Emissions))
#g + geom_point(alpha=1/3) + facet_wrap(~ type, nrow = 1, ncol = 4)
g + geom_boxplot()
g <- ggplot(NEI_Baltimore, aes(year, Emissions))
g + geom_boxplot()
g <- ggplot(NEI_Baltimore, aes(factor(year), Emissions))
g + geom_boxplot()
g + geom_boxplot() + scale_y_log10()
g + geom_boxplot() + facet_wrap(~ type, nrow = 4, ncol = 1) + scale_y_log10()
g + geom_boxplot()
+ facet_wrap(~ type, nrow = 1, ncol = 4)
+ scale_y_log10()
+ labs(title = "Baltimore 1999-2008: Downward trend in PM.2.5 Emission with peak in 2005")
+ labs(x = "Year", y ="Total PM2.5 Emission (megatons/y) - note, log10 scale")
g <- ggplot(NEI_Baltimore, aes(factor(year), Emissions))
g + geom_boxplot()
+ facet_wrap(~ type, nrow = 1, ncol = 4)
+ scale_y_log10()
+ labs(title = "Baltimore 1999-2008: Downward trend in PM.2.5 Emission with peak in 2005")
+ labs(x = "Year", y ="Total PM2.5 Emission (megatons/y) - note, log10 scale")
g <- ggplot(NEI_Baltimore, aes(factor(year), Emissions))
#g + geom_point(alpha=1/3)
g + geom_boxplot()
+ facet_wrap(type~, nrow = 1, ncol = 4)
+ scale_y_log10()
+ labs(title = "Baltimore 1999-2008: Downward trend in PM.2.5 Emission with peak in 2005")
+ labs(x = "Year", y ="Total PM2.5 Emission (megatons/y) - note, log10 scale")
g <- ggplot(NEI_Baltimore, aes(factor(year), Emissions))
#g + geom_point(alpha=1/3)
g + geom_boxplot()
+ facet_wrap(~type, nrow = 4, ncol = 1)
+ scale_y_log10()
+ labs(title = "Baltimore 1999-2008: Downward trend in PM.2.5 Emission with peak in 2005")
+ labs(x = "Year", y ="Total PM2.5 Emission (megatons/y) - note, log10 scale")
g <- ggplot(NEI_Baltimore, aes(factor(year), Emissions))
#g + geom_point(alpha=1/3)
g + geom_boxplot()
+ facet_wrap(~ type, nrow = 4, ncol = 1)
+ scale_y_log10()
+ labs(title = "Baltimore 1999-2008: Downward trend in PM.2.5 Emission with peak in 2005")
+ labs(x = "Year", y ="Total PM2.5 Emission (megatons/y) - note, log10 scale")
g <- ggplot(NEI_Baltimore, aes(factor(year), Emissions))
#g + geom_point(alpha=1/3)
g + geom_boxplot()
+ facet_wrap(~ type, nrow = 4, ncol = 1)
+ scale_y_log10()
g <- ggplot(NEI_Baltimore, aes(factor(year), Emissions))
#g + geom_point(alpha=1/3)
g + geom_boxplot()
library(ggplot2)
# Reading the data into NEI and SCC
NEI <- readRDS("summarySCC_PM25.rds")
NEI_Baltimore <- subset(NEI,fips=="24510")
g <- ggplot(NEI_Baltimore, aes(factor(year), Emissions))
g + geom_boxplot()
+ facet_wrap(~ type, nrow = 4, ncol = 1)
g + geom_boxplot() + facet_wrap(~ type, nrow = 4, ncol = 1)
g + geom_boxplot() + facet_wrap(~ type, nrow = 1, ncol = 4)
g + geom_boxplot() + facet_wrap(~ type, nrow = 1, ncol = 4) + scale_y_log10()
g + geom_boxplot()
+ facet_wrap(~ type, nrow = 1, ncol = 4)
+ scale_y_log10() + labs(title = "Baltimore 1999-2008: Downward trend in PM.2.5 Emission with peak in 2005")
+ labs(x = "Year", y ="Total PM2.5 Emission (megatons/y) - note, log10 scale")
g + geom_boxplot() +
facet_wrap(~ type, nrow = 1, ncol = 4) +
scale_y_log10() + labs(title = "Baltimore 1999-2008: Downward trend in PM.2.5 Emission with peak in 2005") +
labs(x = "Year", y ="Total PM2.5 Emission (megatons/y) - note, log10 scale")
head(NEI_Baltimore)
g <- ggplot(NEI_Baltimore, aes(factor(year), Emissions/1e6))
#g + geom_point(alpha=1/3)
g + geom_boxplot() +
facet_wrap(~ type, nrow = 1, ncol = 4) +
scale_y_log10() + labs(title = "Baltimore 1999-2008: Downward trend in PM.2.5 Emission with peak in 2005") +
labs(x = "Year", y ="Total PM2.5 Emission (megatons/y) - note, log10 scale")
NEI_Baltimore <- subset(NEI,fips=="24510" & type=="NONPOINT")
EpY <- with(NEI_Baltimore, tapply(Emissions, year, sum, na.rm=T))/1e6
plot(names(EpY),EpY,
pch=19,
col=2,
cex=2,
xlab="Year",ylab="Total PM2.5 Emission (megatons/y)",
main="",
xlim=c(1998,2009),
ylim=c(0,0.005))
lines(names(EpY),EpY,
col=2,
lwd=3)
g <- ggplot(NEI_Baltimore, aes(factor(year), Emissions))
g + geom_boxplot() +
facet_wrap(~ type, nrow = 1, ncol = 4) +
scale_y_log10() + labs(title = "Baltimore 1999-2008: Downward trend in PM.2.5 Emission with peak in 2005") +
labs(x = "Year", y ="Total PM2.5 Emission (tons/y) - note, log10 scale")
NEI_Baltimore <- subset(NEI,fips=="24510")
g <- ggplot(NEI_Baltimore, aes(factor(year), Emissions))
g + geom_boxplot() +
facet_wrap(~ type, nrow = 1, ncol = 4) +
scale_y_log10() + labs(title = "Baltimore 1999-2008: Downward trend in PM.2.5 Emission with peak in 2005") +
labs(x = "Year", y ="Total PM2.5 Emission (tons/y) - note, log10 scale")
EpY_NON-ROAD <- with(subset(NEI,fips=="24510", type="NON-ROAD"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY_NONPOINT <- with(subset(NEI,fips=="24510", type="NONPOINT"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY_ON-ROAD <- with(subset(NEI,fips=="24510", type="ON-ROAD"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY_POINT <- with(subset(NEI,fips=="24510", type="POINT"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY_NONROAD <- with(subset(NEI,fips=="24510", type="NON-ROAD"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY_NONPOINT <- with(subset(NEI,fips=="24510", type="NONPOINT"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY_ONROAD <- with(subset(NEI,fips=="24510", type="ON-ROAD"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY_POINT <- with(subset(NEI,fips=="24510", type="POINT"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY
NEI_Baltimore <- subset(NEI,fips=="24510")
# Calculate total emissions per year (megatons per year)
EpY <- with(NEI_Baltimore, tapply(Emissions, year, sum, na.rm=T))/1e6
EpY
EpY_NONPOINT
table(NEI_Baltimore, year,type)
with(NEI_Baltimore, table(year,type))
EpY_POINT
EpY_ONROAD
subset(NEI,fips=="24510", type="NON-ROAD")
EpY_NONROAD <- with(subset(NEI,fips=="24510" & type="NON-ROAD"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY_NONPOINT <- with(subset(NEI,fips=="24510" & type="NONPOINT"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY_ONROAD <- with(subset(NEI,fips=="24510" & type="ON-ROAD"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY_POINT <- with(subset(NEI,fips=="24510" & type="POINT"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY_NONROAD <- with(subset(NEI,fips=="24510" & type=="NON-ROAD"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY_NONPOINT <- with(subset(NEI,fips=="24510" & type=="NONPOINT"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY_ONROAD <- with(subset(NEI,fips=="24510" & type=="ON-ROAD"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY_POINT <- with(subset(NEI,fips=="24510" & type=="POINT"), tapply(Emissions, year, sum, na.rm=T))/1e6
EpY_NONPOINT
EpY_NONROAD
EpY_ONROAD
with(NEI_Baltimore, table(year,type))
with(NEI_Baltimore, table(type,year))
EpY_POINT
g <- ggplot(NEI_Baltimore, aes(factor(year), Emissions))
g + geom_boxplot() +
facet_wrap(~ type, nrow = 1, ncol = 4) +
scale_y_log10() + labs(title = "Baltimore 1999-2008: Non-Road, On-Road and Point see a decrease in PM.2.5 Emission, where NonPoint stays same") +
labs(x = "Year", y ="Total PM2.5 Emission (tons/y) - note, log10 scale")
